---
title: 基于图块的渲染
date: 2020-09-14 17:23:39
tags: 
- GPU
- TBR
---

# 概述
* 与桌面GPU可以极端追求性能不同, 移动端GPU必须在性能与电量之间进行平衡
* 电量开销最大的是内存带宽
* 移动设备没有显存, 也CPU共用一块内存
* 由于空间限制, 片上空间非常有限
* 解决方案就是在片上放一个高速的图块缓冲(Tile Buffer), 按照图块来进行渲染, 渲染完成后将图块缓冲的内容写入到片外的帧缓冲(Frame Buffer)

# 基本流程
* 经过几何处理之后, 将各个图块的几何信息保存到片外的内存, 这块数据叫做帧数据(frame data)
* 在片元处理阶段, 从片外内存读取帧数据, 然后以图块为单位对图块缓冲进行读写, 整个图块处理完毕之后, 把颜色写入到帧缓冲中
* 只要帧数据较小, 这个优化就是成立的, 但如果模型过于细分, 这就变成了一个劣化

# 理解帧数据
* 渲染的内容并不是写入到帧缓冲, 而是生成帧数据
* glClear操作对于帧缓冲是昂贵的, 但对于帧数据只是简单释放已有数据, 代价非常低

# 延迟
* TBR分成两个阶段: 分箱(Binning)和